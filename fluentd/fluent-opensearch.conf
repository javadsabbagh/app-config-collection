<source>
  type           tail
  read_from_head true
  path           /opt/logs/*.log
  pos_file       /opt/logs/positions/fluentd-log.pos
  time_format    %Y-%m-%dT%H:%M:%S
  tag            chq-apps-logs.*
  format         json
</source>

<match chq-apps-logs.**>
    @type opensearch
    host 192.168.100.119
    scheme https
    port 9200
    # This option needs timekey property to be enabled in buffer section
    index_name chq.%Y-%m-%d
    user admin
    password admin
    ssl_verify false
    <buffer time, tag>
        @type memory
        flush_thread_count 2
        flush_interval 5s
        chunk_limit_size 5m
        chunk_limit_records 1000

        # If you want to chunk indices based on time you need to activate this feature with the following property.
        timekey 1h # chunks per hours ("3600" also available)
    </buffer>
</match>